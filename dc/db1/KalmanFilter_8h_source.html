<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<title>EIC Software: EicRoot/blob/master/eic/htc/KalmanFilter.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script> <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script> 
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-155388685-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-155388685-3');
</script>
</head>
<body>
	<div id="top">
		<!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectlogo"><a href="https://eic.github.io/"><img
								alt="Logo" src="../../ion-collision-xparent-crop.png" height="100"/></a></td>
						<td style="padding-left: 0.5em;">
							<div id="projectname">
								EIC Software
							</div> 
							<div id="projectbrief">
								Reference for 
								<a href="https://eic.github.io/">EIC</a> 
								<a href="https://github.com/eic/">simulation and reconstruction software on GitHub</a>
							</div> 
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Home&#160;page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../usergroup0.html"><span>External&#160;Links</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/db1/KalmanFilter_8h_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">KalmanFilter.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dc/db1/KalmanFilter_8h.html">Go to the documentation of this file.</a> Or view <a target="top" href="https://github.com/eic/EicRoot/blob/master/eic/htc/KalmanFilter.h">the newest version in sPHENIX GitHub for file KalmanFilter.h</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// AYK (ayk@bnl.gov)</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//    Kalman filter class routines; ported from HERMES/OLYMPUS sources; </span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  cleaned up 2014/10/10;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d5/d12/KfMatrix_8h.html">KfMatrix.h</a>&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d7/d60/KalmanNode_8h.html">KalmanNode.h</a>&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#ifndef _KALMAN_FILTER_</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _KALMAN_FILTER_</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// Possible bits in Transport() call &quot;mode&quot; flag; in particular </span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// CPU-consuming derivatives are not always needed;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a4f51175547eaeb6e749d7ba3a9aeeec6">   18</a></span>&#160;<span class="preprocessor">#define _CALCULATE_DERIVATIVES_   0x0001</span></div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a3f027fc9b154da4e22bc9fc0c9aad2a4">   19</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _CALCULATE_PROCESS_NOISE_ 0x0002</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// Possible failure bits in filter/smoother/chain return codes; NEVER change already </span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// defined bits; if ever add new bits, check (and possibly update) _FATAL_FAILURE_MASK_;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#af06381a561d7038da27f8ebc05ee241f">   23</a></span>&#160;<span class="preprocessor">#define _TFUN_FAILURE_         0x0001</span></div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a211ac4b780c2ac8da0209f4bc333c316">   24</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _NFUN_FAILURE_         0x0002</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a34a18d7aadc6091f1db6864793f7fc77">   25</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _XFUN_FAILURE_         0x0004</span></div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a7ac040c0b0bd1137d5356397744348b8">   26</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _HFUN_FAILURE_         0x0008</span></div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#abfa3782f9a0716f8b2a73f9603e4f9cc">   27</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _DSINV_FAILURE_        0x0010</span></div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#aef2edb50e1f67e63fdb3d271a44025bb">   28</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _POSITIVITY_FIX_       0x0020</span></div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#accf16f3c0da55ced651a48e682e670e3">   29</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _CHAIN_FAILURE_        0x0040</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor"></span><span class="comment">// These 3 bits are at present not considered as fatal ones;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a85505cf60a8f769d70a42d03170af1a7">   31</a></span>&#160;<span class="preprocessor">#define _NDF_FAILURE_          0x0080</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a362740dbdfab3ccaa8a4b598e2d8a876">   32</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _STRUST_FAILURE_       0x0100</span></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a6ee6bdb4de6c892ba1a1b4b59791a81f">   33</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _WORST_NODE_IMMUTABLE_ 0x0200</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// Certain bits mean fatal error of the whole chain; other ones </span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// are more or less harmless and (like NDF failure) just mean </span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// that track is probably of a low general quality;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#ab6a4b9e4d2b69cd765a41ec12d8f0036">   38</a></span>&#160;<span class="preprocessor">#define _FATAL_FAILURE_MASK_   0x005F</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// Possible &#39;mode&#39; argument values for KalmanChain(); see code</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// for further details;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a9cd1e20ba6521cb47979094f6440408a">   42</a></span>&#160;<span class="preprocessor">#define _TRUST_SMOOTHER_FCN_ 0x0001</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a2a6594bcf60cb583e8ef63b348db37d1">   43</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _TRUST_FILTER_FCN_   0x0002</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a50621379a5bea7702bce41fb1eb509e3">   45</a></span>&#160;<span class="preprocessor">#define _KF_RETURN_(ret, message, what) \</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">  _RETURN_((ret), (mVerbosityLevel &gt;= what ? message : 0))</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//#define _KF_RETURN_ERROR_  (ret, message) _KF_RETURN_(ret,message,KalmanFilter::Error)</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//#define _KF_RETURN_WARNING_(ret, message) _KF_RETURN_(ret,message,KalmanFilter::Warning)</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">//#define _KF_RETURN_INFO_   (ret, message) _KF_RETURN_(ret,message,KalmanFilter::Info)</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// Looks ugly, but suffices to append extra bits in KalmanChain() return code;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a716b1c9921ccae54fbe3eb5687526591">   53</a></span>&#160;<span class="preprocessor">#define _CHAIN_RETURN_(ret) return((ret)|mExtraReturnBits)</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">// Cases with higher off-diagonal correlation coefficients are </span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// indeed very rare and in general suspicious;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a074cd31b5eb1582d0565ec6a52fe1b55">   57</a></span>&#160;<span class="preprocessor">#define _MAX_FIXABLE_POSITIVITY_SCREWUP_DEFAULT_  (1.20)</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor"></span><span class="comment">// Fix too high off-diagonal correlation coefficients to this value;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a0e7c04572a8f2c8b7357cce7c9650671">   59</a></span>&#160;<span class="preprocessor">#define _POSITIVITY_CORRELATION_FIX_DEFAULT_      (0.99)</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">// Keep this stuff until find a better way to detect situations with </span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// too small filtered residual covariance matrix RF[][]; </span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#ac626f06f3cba433542493a4c8a15161d">   63</a></span>&#160;<span class="preprocessor">#define _RF_CUTOFF_DEFAULT_                      (1E-11)</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#acda96e297da4c236f24444735f1f8826">   65</a></span>&#160;<span class="preprocessor">#define _FIRED_RPLANE_PREFIX_ &quot;fired-node-min=&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">// If worst hit has probability below this value (and depending on </span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">// kalman_chain() &quot;mode&quot;) declare hit as outlier;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">// NB: 1-dim chi^2 tail integrals:</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//   &gt;=1 sigma from 0:  0.3173</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//   &gt;=2 sigma from 0:  0.0455 </span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//   &gt;=3 sigma from 0:  0.0027 </span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">//   &gt;=4 sigma from 0: &lt;0.0001 </span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a58d1401b42b95b07fcc7f03f4af8f592">   74</a></span>&#160;<span class="preprocessor">#define _MIN_SMOOTHER_CHI_SQUARE_CCDF_DEFAULT_ (0.001)</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// If probability of overall filter chi^2 is below this value </span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">// (and depending on kalman_chain() &quot;mode&quot;) try to remove yet </span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// another node;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="code" href="../../dc/db1/KalmanFilter_8h.html#a01b52ef500f3bb30cbe717c871f24fe2">   79</a></span>&#160;<span class="preprocessor">#define _MIN_FILTER_CHI_SQUARE_CCDF_DEFAULT_   (0.003)</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html">   81</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d6/d2a/classKalmanFilter.html">KalmanFilter</a> {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="comment">// The constructor &amp; destructor; the latter one should be done properly </span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">// at some point; in fact however I&#39;m always using execution-long class, </span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// so it automatically gets cleaned up once application exits;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="../../d6/d2a/classKalmanFilter.html#a6bef90f1a4f160db78e6244a690b3a01">KalmanFilter</a>(<span class="keywordtype">int</span> sdim);</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#af01e932cd20cec5dd06ca5d8f0b722f4">   87</a></span>&#160;  <a class="code" href="../../d6/d2a/classKalmanFilter.html#af01e932cd20cec5dd06ca5d8f0b722f4">~KalmanFilter</a>() {};</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// This does not really help, since I&#39;d like to use them as loop variables;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// by all means never change: must be Forward=0 and Backward=1 therefore;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301a2d4913d81db3e15a46103a44ca890eb8">   91</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301">Direction</a> {<a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301a2d4913d81db3e15a46103a44ca890eb8">Undefined</a> = -1, <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301a0ee44748271f2bf9a0c1e59671792ba0">Forward</a>, <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301ab9d2e05c5574456f81aa222c76f0abe5">Backward</a>};</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a51d93c6451f96b52a3681287b8ae2dadaf039328b3765a6b8d099ed1df3aea2e8">   92</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a51d93c6451f96b52a3681287b8ae2dad">Verbosity</a> {<a class="code" href="../../d6/d2a/classKalmanFilter.html#a51d93c6451f96b52a3681287b8ae2dadab022e7326414f37ba56150467fe5fca3">Never</a>, <a class="code" href="../../d6/d2a/classKalmanFilter.html#a51d93c6451f96b52a3681287b8ae2dadaf0e967b6e9a622677e42818f3da52f74">Error</a>, <a class="code" href="../../d6/d2a/classKalmanFilter.html#a51d93c6451f96b52a3681287b8ae2dadaf039328b3765a6b8d099ed1df3aea2e8">Warning</a>, <a class="code" href="../../d6/d2a/classKalmanFilter.html#a51d93c6451f96b52a3681287b8ae2dadaf6a5b8d4803dd556e653b5019f3ae931">Info</a>};</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a4483a97b2511057ae585042b45dde865">   94</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a4483a97b2511057ae585042b45dde865">SetVerbosity</a>(<a class="code" href="../../d6/d2a/classKalmanFilter.html#a51d93c6451f96b52a3681287b8ae2dad">Verbosity</a> verb)              { <a class="code" href="../../d6/d2a/classKalmanFilter.html#abe11dff14af0725ee55673ae51a45f43">mVerbosityLevel</a> = verb; };</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a0128751061d52bd70d90c555b88223af">   96</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a0128751061d52bd70d90c555b88223af">SetXmCalculationFlag</a>(<span class="keywordtype">bool</span> flag)           { <a class="code" href="../../d6/d2a/classKalmanFilter.html#a38ef340602577d163cb984fa270b0cae">mXmCalculationFlag</a> = flag; };</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// FIXME: seems to not be used in magnet-off mode;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a6f4dd2eb4849878c13d31aaeeefec60d">   99</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a6f4dd2eb4849878c13d31aaeeefec60d">SetNodeGapMax</a>              (<span class="keywordtype">double</span> <a class="code" href="../../d3/d32/has__duplicates_8hpp.html#a5b4ee4ae6cba6bb75200ba7af1910873">value</a>) { <a class="code" href="../../d6/d2a/classKalmanFilter.html#ac3bc5f9249588956e1a6999e29bc2e7e">mNodeGapMax</a>               = <a class="code" href="../../d3/d32/has__duplicates_8hpp.html#a5b4ee4ae6cba6bb75200ba7af1910873">value</a>; };</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a384e01ba1145ed3b1754158c887bf755">  101</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a384e01ba1145ed3b1754158c887bf755">SetMinFilterChiSquareCCDF</a>  (<span class="keywordtype">double</span> <a class="code" href="../../d3/d32/has__duplicates_8hpp.html#a5b4ee4ae6cba6bb75200ba7af1910873">value</a>) { <a class="code" href="../../d6/d2a/classKalmanFilter.html#aa3cc65d9936401e3195b3a483deff0cb">mMinFilterChiSquareCCDF</a>   = <a class="code" href="../../d3/d32/has__duplicates_8hpp.html#a5b4ee4ae6cba6bb75200ba7af1910873">value</a>; };</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#ac0a301869fc1bae786938b2c33af6c92">  102</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#ac0a301869fc1bae786938b2c33af6c92">GetMinFilterChiSquareCCDF</a>()<span class="keyword">       const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#aa3cc65d9936401e3195b3a483deff0cb">mMinFilterChiSquareCCDF</a>; };</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#ab343b6f5a1f3224f24f7ed095c7427c5">  103</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#ab343b6f5a1f3224f24f7ed095c7427c5">SetMinSmootherChiSquareCCDF</a>(<span class="keywordtype">double</span> <a class="code" href="../../d3/d32/has__duplicates_8hpp.html#a5b4ee4ae6cba6bb75200ba7af1910873">value</a>) { <a class="code" href="../../d6/d2a/classKalmanFilter.html#a73c606d3c5d8f511e8540158996c0311">mMinSmootherChiSquareCCDF</a> = <a class="code" href="../../d3/d32/has__duplicates_8hpp.html#a5b4ee4ae6cba6bb75200ba7af1910873">value</a>; };</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a4b115abed1385c55ec3636b9379f39ad">  105</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a4b115abed1385c55ec3636b9379f39ad">SetPositivityFixParameters</a>(<span class="keywordtype">double</span> maxFixablePositivityScrewup, </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;          <span class="keywordtype">double</span> positivityCorrelationFix) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="../../d6/d2a/classKalmanFilter.html#affec4d56d4efba01b15b6a7910ff1115">mMaxFixablePositivityScrewup</a> = maxFixablePositivityScrewup;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="../../d6/d2a/classKalmanFilter.html#a3939f3d7b5dfb4e1be546384241050a2">mPositivityCorrelationFix</a>    = positivityCorrelationFix;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  };</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a0a21d4b20d7fff865482fab4b501fd04">  111</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a0a21d4b20d7fff865482fab4b501fd04">SetRFCutoffValue</a>(<span class="keywordtype">double</span> <a class="code" href="../../d3/d32/has__duplicates_8hpp.html#a5b4ee4ae6cba6bb75200ba7af1910873">value</a>)  { <a class="code" href="../../d6/d2a/classKalmanFilter.html#afcb3fe5f3e6ba32e49e89a9468d64169">mRFCutoffValue</a> = <a class="code" href="../../d3/d32/has__duplicates_8hpp.html#a5b4ee4ae6cba6bb75200ba7af1910873">value</a>; };</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// Default way to allocate new nodes and simplified wrapper; </span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a1e6a94b24e4c9a6cf3dfade25482f153">AddNode</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d16/VstRadLength_8C.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="keywordtype">double</span> <a class="code" href="../../dc/d49/HelixHough__allButKappaRange__sse_8cpp.html#a9593b8fc874ec60dacdcbeaec75a8235">z</a>, <span class="keywordtype">int</span> mdim, </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">bool</span> nonLinearTransportFlags[2]);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a8b30371bca3e6dc697ee6ec300c4af57">AddNodeWrapper</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d3/d16/VstRadLength_8C.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *format, <span class="keywordtype">double</span> <a class="code" href="../../dc/d49/HelixHough__allButKappaRange__sse_8cpp.html#a9593b8fc874ec60dacdcbeaec75a8235">z</a>, <span class="keywordtype">int</span> mdim);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a6416ee1ca85f5d68fb1e4789db0866e2">Configure</a>(<span class="keyword">const</span> <a class="code" href="../../d0/d6b/classStringList.html">StringList</a> *<a class="code" href="../../d5/d92/namespaceconfigureMap.html#a9836284b2e2e560cadb1aa2c625b3572">config</a><span class="comment">/*, const char *format*/</span>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a3dc79ff2ca154297d6d86f3dee8f0194">FilterPass</a>(<a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../dc/de5/PHG4mRICHDetector_8cc.html#a10e6010f5f8222befd1273192d72ddf5">start</a>, <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *end, <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301">KalmanFilter::Direction</a> fb);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#ad511380e4a3b0a4c044e807701d80e75">FullChain</a> (<a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../dc/de5/PHG4mRICHDetector_8cc.html#a10e6010f5f8222befd1273192d72ddf5">start</a>, <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *end, <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301">KalmanFilter::Direction</a> fb, <span class="keywordtype">int</span> mode);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a16254eb12292f89b6c3025d1982e7893">BuildNodeList</a>();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a1efe93e1ca814b9d90b7e981e13ea112">ResetFiredFlags</a>();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a182964a2032f4a5e1f079a54d39c1594">HackGroupHitCountLimit</a>(<span class="keywordtype">unsigned</span> <a class="code" href="../../dc/d49/HelixHough__allButKappaRange__sse_8cpp.html#a4735a0c4d1b11f62ea44115d54a93087">min</a>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a1157e070c3aab64ed471d0458419264f">LatchGroupNdfControlFlags</a>();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">//unsigned GetNodeCount()         const { return mNodeCount; };</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a6cae93c8c24c0a441ce21ddf7ab1bc27">  130</a></span>&#160;  <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a6cae93c8c24c0a441ce21ddf7ab1bc27">GetHead</a>()<span class="keyword">           const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#aac222f7c48aa36a619f3e81c9a1eae1d">mHead</a>; };</div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a9762f7041c9dccd852e813c5dd380467">  131</a></span>&#160;  <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a9762f7041c9dccd852e813c5dd380467">GetTail</a>()<span class="keyword">           const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a1ac7f3cfd1048e7552604e87a2ecf371">mTail</a>; };</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#af2639c53883730de83bb77c60af9fa53">  133</a></span>&#160;  <span class="keywordtype">int</span>    <a class="code" href="../../d6/d2a/classKalmanFilter.html#af2639c53883730de83bb77c60af9fa53">GetFilterNdf</a>()<span class="keyword">           const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a84cd00847056c70efc60fe54a18d685b">mNdf</a>; };</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#ad94513e10ce270d2fb357e2d52c9d6a2">  134</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#ad94513e10ce270d2fb357e2d52c9d6a2">GetFilterChiSquare</a>()<span class="keyword">     const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#aeb5d6ab574df6feba9cfb33eb7dbd862">mFilterChiSquare</a>; };</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#aec0c2e98e563292afe2fe6e0c7b92b34">  135</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#aec0c2e98e563292afe2fe6e0c7b92b34">GetFilterChiSquareCCDF</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#ac08d0ab4bba617db8428a1a3ef030725">mFilterChiSquareCCDF</a>; };</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#if _OLD_</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor"></span>  <span class="comment">// It looks like users should have no access to this routine (call FullChain() instead);</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor"></span>  <span class="keywordtype">int</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a71cf5c851023da4b228e3654cca58928">SmootherPass</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a67dd256e12acd2994d961640da5d5083">  142</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a67dd256e12acd2994d961640da5d5083">SetExtraNdfCount</a>(<span class="keywordtype">int</span> count)  { <a class="code" href="../../d6/d2a/classKalmanFilter.html#aff5ead10f0af7a83997c0bf466903b32">mExtraNdfCount</a> = count; };</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  std::multimap&lt;double, KalmanNode*&gt; <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5b7f2f8bf70c38fbea402a7ebc07f280">mKalmanNodePool</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// NB: there is a certain trick involved here -&gt; see respective TrKalmanFilter call;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a457a1b99f966a8021769481da8164a05">  148</a></span>&#160;  <span class="keyword">virtual</span> <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a457a1b99f966a8021769481da8164a05">AllocateNode</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a>();};</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a06c2cdbf11c690bc94d7efccdf7b5b93">  150</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a183aeef54adb9ddcbed2f923095eccae">NeedNonLinearTransport</a>(<span class="keywordtype">double</span> <a class="code" href="../../dc/d49/HelixHough__allButKappaRange__sse_8cpp.html#a9593b8fc874ec60dacdcbeaec75a8235">z</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; };</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">//  Generic variables;</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// State vector dimension: 4 (no field) or 5 (with magnetic field); </span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a06c2cdbf11c690bc94d7efccdf7b5b93">sDim</a>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// 0 - so Verbosity::Never - per default (no printouts);</span></div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#abe11dff14af0725ee55673ae51a45f43">  161</a></span>&#160;  <a class="code" href="../../d6/d2a/classKalmanFilter.html#a51d93c6451f96b52a3681287b8ae2dad">Verbosity</a> <a class="code" href="../../d6/d2a/classKalmanFilter.html#abe11dff14af0725ee55673ae51a45f43">mVerbosityLevel</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">// Usually don&#39;t need xm[] vector calculation; FIXME: there are other parts</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// which not always needed -&gt; optimize and use similar flags;</span></div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a38ef340602577d163cb984fa270b0cae">  165</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a38ef340602577d163cb984fa270b0cae">mXmCalculationFlag</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// Several node groups can be declared; smoother should take </span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// care to guarantee that when removing outliers min number of</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// nodes in each group is granted;</span></div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#afb318b6582f705dbf02fd79005e125b2">  170</a></span>&#160;  <a class="code" href="../../d1/d50/classNodeGroup.html">NodeGroup</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#afb318b6582f705dbf02fd79005e125b2">mNodeGroups</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// Total number of nodes; useless variable in fact;</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">//unsigned mNodeCount;</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// Max allowed gap between two neighboring Kalman nodes; extra nodes</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// are added automatically (CHECK!) during initialization stage (if needed);</span></div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#ac3bc5f9249588956e1a6999e29bc2e7e">  176</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#ac3bc5f9249588956e1a6999e29bc2e7e">mNodeGapMax</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// Configuration variables which define filter-smoother chain behavior;</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a73c606d3c5d8f511e8540158996c0311">  179</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a73c606d3c5d8f511e8540158996c0311">mMinSmootherChiSquareCCDF</a>, <a class="code" href="../../d6/d2a/classKalmanFilter.html#aa3cc65d9936401e3195b3a483deff0cb">mMinFilterChiSquareCCDF</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// Buffer matrices; SU[][] will be a unity matrix of respective dimension; </span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a7c6a6b91058b6efa517098c2cd38b862">  185</a></span>&#160;  <a class="code" href="../../da/dd0/classKfMatrix.html">KfMatrix</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a7c6a6b91058b6efa517098c2cd38b862">SMTX</a>;        <span class="comment">//[SDIM][SDIM]</span></div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a72a17d3b2c3b2a81ab080676aa9d5060">  186</a></span>&#160;  <a class="code" href="../../da/dd0/classKfMatrix.html">KfVector</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a72a17d3b2c3b2a81ab080676aa9d5060">SVEC</a>, *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a411c809178a27e377589a79f57ec565c">QVEC</a>; <span class="comment">//[SDIM]</span></div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a35114b016772134102611c1eef19edea">  187</a></span>&#160;  <a class="code" href="../../da/dd0/classKfMatrix.html">KfMatrix</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a35114b016772134102611c1eef19edea">SU</a>;          <span class="comment">//[SDIM][SDIM]</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// Well, it would probably make sense to use C++ STL container class here;</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// however the overhead to port 2-way navigation may be too big; in particular</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// will have to replace KalmanNode pointers by set (or list) iterators;</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// so leave things as they are?;</span></div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a1ac7f3cfd1048e7552604e87a2ecf371">  193</a></span>&#160;  <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#aac222f7c48aa36a619f3e81c9a1eae1d">mHead</a>, *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a1ac7f3cfd1048e7552604e87a2ecf371">mTail</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// Well, say a strict cov.matrix setting at the head node can be seen as </span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// an extra measurement; clearly the core KF code can not judge on that; </span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// as of 2015/11/05 this value will actually be added to mNdf (and therefore</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// accounted not only in CCDF calculation, but in GetFilterNdf() call);</span></div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#aff5ead10f0af7a83997c0bf466903b32">  199</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#aff5ead10f0af7a83997c0bf466903b32">mExtraNdfCount</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">// Parameters which guide KF core code how to handle symmetric matrix </span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">// numeric instabilities; FIXME: need to look into this more carefully;</span></div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#aeb0ed86093c9541a7b9a3d0ff6ba2617">  203</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#aeb0ed86093c9541a7b9a3d0ff6ba2617">mPositivityCheck</a>, <a class="code" href="../../d6/d2a/classKalmanFilter.html#ac37d594f0e018efd90014a92c89cc151">mForceSymmetrization</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#affec4d56d4efba01b15b6a7910ff1115">  204</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#affec4d56d4efba01b15b6a7910ff1115">mMaxFixablePositivityScrewup</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a3939f3d7b5dfb4e1be546384241050a2">  205</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a3939f3d7b5dfb4e1be546384241050a2">mPositivityCorrelationFix</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#afcb3fe5f3e6ba32e49e89a9468d64169">  206</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#afcb3fe5f3e6ba32e49e89a9468d64169">mRFCutoffValue</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="comment">// Filter working variables;</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">// Make smoother aware about what was the last successful filter pass direction;</span></div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a7b48f0a8dda44643d86004065d9d6d96">  213</a></span>&#160;  <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301">KalmanFilter::Direction</a> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a7b48f0a8dda44643d86004065d9d6d96">mLastFilterPass</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// Also save last working filter conditions (for the smoother); </span></div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a31b0db5559d7b3bd91dd02edd244a0c7">  215</a></span>&#160;  <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a31b0db5559d7b3bd91dd02edd244a0c7">mLastStart</a>, *<a class="code" href="../../d6/d2a/classKalmanFilter.html#a1789602af0adf99b603e2f3ec9208afc">mLastEnd</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="comment">// Number of degrees of freedom for the current filter pass; NB: may indeed </span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="comment">// vary from event to event depending on the actual number of hits used;</span></div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a84cd00847056c70efc60fe54a18d685b">  219</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a84cd00847056c70efc60fe54a18d685b">mNdf</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// chi^2 and complement of its cumulative distribution function for</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// the given number of degrees of freedom; one value for the whole chain;</span></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#ac08d0ab4bba617db8428a1a3ef030725">  222</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#aeb5d6ab574df6feba9cfb33eb7dbd862">mFilterChiSquare</a>, <a class="code" href="../../d6/d2a/classKalmanFilter.html#ac08d0ab4bba617db8428a1a3ef030725">mFilterChiSquareCCDF</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// Smoother working variables;</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// Node with the worst smoother chi^2 after the last smoother pass;</span></div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#acfbed2ec72e2a34ba2692e83aeb10593">  229</a></span>&#160;  <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#acfbed2ec72e2a34ba2692e83aeb10593">mWorstSmootherNode</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// Same, but either not coupled to any node group or belonging </span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// to a node group where mFiredNodeNumMin is not reached yet;</span></div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#aa19875e29a67684005c04871611bbbc7">  232</a></span>&#160;  <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../d6/d2a/classKalmanFilter.html#aa19875e29a67684005c04871611bbbc7">mWorstResettableSmootherNode</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// Complete chain working variables;</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// Number of nodes rejected during filter-smoother pass;</span></div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a24ac24ab2b5434f7654fd70349ed344f">  239</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a24ac24ab2b5434f7654fd70349ed344f">mChainRejectedNodeNum</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// If for instance smoother had a recoverable trouble, it is</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// convenient to record it in some extra bitmask instead of returning</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// non-zero code and keep track on it in KalmanChain(); these bits will </span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// be OR&#39;ed with the rest of Kalman chain return code;</span></div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a177718097efbebc2168d006ca607c4ac">  245</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a177718097efbebc2168d006ca607c4ac">mExtraReturnBits</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="comment">// Private methods;</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// Service matrix calculation for the current filter pass;</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a55ddbff3b818a05898149dd51313047a">Calculate_x0_FR_Q</a>(<a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../dc/de5/PHG4mRICHDetector_8cc.html#a10e6010f5f8222befd1273192d72ddf5">start</a>, <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *end, </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;           <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301">KalmanFilter::Direction</a> fb, <span class="keywordtype">unsigned</span> mode);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// Core KF calculations;</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a45d7662a8e30d56baa92e9eb43967128">DoFilterAlgebra</a>(<a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *<a class="code" href="../../dc/de5/PHG4mRICHDetector_8cc.html#a10e6010f5f8222befd1273192d72ddf5">start</a>, <a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *end, <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301">KalmanFilter::Direction</a> fb);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// chi^2, CCDF&#39;s, etc after the last pass;</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#abb88864f4aa74aa6f35657345ee7f268">CalculateFilterStat</a>();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// H-projector matrix calculation; it would be more natural to put these </span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// functions as virtual into KalmanNode, but it does not work; think later;</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a4e247bbdaff4fb3f80606adb167d4be0">CalculateHMatrix</a>(<a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *node) = 0;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// Main transport routine; should be provided by user;</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#ab91ffb8e9d22449dc3f3e0ef754653f2">Transport</a>(<a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *from, <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301">KalmanFilter::Direction</a> fb, <span class="keywordtype">unsigned</span> mode) = 0;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// Extra transport code (process noise and dE/dx losses calculation </span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// in case of tracking); may be empty I guess?;</span></div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="code" href="../../d6/d2a/classKalmanFilter.html#a8244f47d28f3beedfffc2ec59e744614">  270</a></span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="../../d6/d2a/classKalmanFilter.html#a8244f47d28f3beedfffc2ec59e744614">TransportExtra</a>(<a class="code" href="../../de/ddb/classKalmanNode.html">KalmanNode</a> *from, <a class="code" href="../../d6/d2a/classKalmanFilter.html#a5592d57642d917049cd5df82ba5f1301">KalmanFilter::Direction</a> fb, <span class="keywordtype">unsigned</span> mode) { </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">return</span> 0; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  };</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;};</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath">
	<!-- id is needed for treeview function! -->
	<ul>
		<li class="navelem"><a class="el" href="../../dir_d7aa557fabe0dbc710c3133bbb38c9dd.html">EicRoot</a></li><li class="navelem"><a class="el" href="../../dir_6c2f52c7c502fdce4930bf509aa7892f.html">blob</a></li><li class="navelem"><a class="el" href="../../dir_b7851b2c5844943c52ef11ccfc82d757.html">master</a></li><li class="navelem"><a class="el" href="../../dir_1bfc7400c7d9621b65a7f5dd68fa40ba.html">eic</a></li><li class="navelem"><a class="el" href="../../dir_ca9e3e8fb1c36e79f2c9b0050fa7901f.html">htc</a></li><li class="navelem"><a class="el" href="../../dc/db1/KalmanFilter_8h.html">KalmanFilter.h</a></li>
		<li class="footer">
		Built by <a href="mailto:jhuang@bnl.gov">Jin Huang</a></em>.
			updated: <em>Mon Jan 22 2024 12:43:35</em> using <a
			href="http://www.doxygen.org/index.html"> <img class="footer"
				src="../../doxygen.png" alt="doxygen" /></a> 1.8.2 
				with <a href="https://github.com/eic">EIC GitHub integration</a>
		</li>
	</ul>
</div>
</body>
</html>
