<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<title>EIC Software: EicRoot/blob/master/eic/event/EicEventGenerator.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script> <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script> 
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-155388685-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-155388685-3');
</script>
</head>
<body>
	<div id="top">
		<!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectlogo"><a href="https://eic.github.io/"><img
								alt="Logo" src="../../ion-collision-xparent-crop.png" height="100"/></a></td>
						<td style="padding-left: 0.5em;">
							<div id="projectname">
								EIC Software
							</div> 
							<div id="projectbrief">
								Reference for 
								<a href="https://eic.github.io/">EIC</a> 
								<a href="https://github.com/eic/">simulation and reconstruction software on GitHub</a>
							</div> 
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Home&#160;page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../usergroup0.html"><span>External&#160;Links</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dd/da3/EicEventGenerator_8cxx_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">EicEventGenerator.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dd/da3/EicEventGenerator_8cxx.html">Go to the documentation of this file.</a> Or view <a target="top" href="https://github.com/eic/EicRoot/blob/master/eic/event/EicEventGenerator.cxx">the newest version in sPHENIX GitHub for file EicEventGenerator.cxx</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// AYK (ayk@bnl.gov), 2013/06/12</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//  Interface to eic-smear import classes;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> std::cout;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> std::endl;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/dba/FairPrimaryGenerator_8h.html">FairPrimaryGenerator.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/d92/FairRootManager_8h.html">FairRootManager.h</a>&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../da/d79/FairRunSim_8h.html">FairRunSim.h</a>&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d23/EicEventGenerator_8h.html">EicEventGenerator.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<a class="code" href="../../dd/df6/classEicEventGenerator.html">EicEventGenerator</a>* <a class="code" href="../../dd/df6/classEicEventGenerator.html#a046bf86071a19ddf260c24c872ed4874">EicEventGenerator::mInstance</a> = 0;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#ifdef _PROMC_</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &quot;ProMC.pb.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;ProMCBook.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#ifdef _EICMC_</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &lt;EicMCreader.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// =======================================================================================</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="code" href="../../d8/dba/classPoacher.html#a6045ebabf594cf344f38669fd7eaaa9f">   32</a></span>&#160;<a class="code" href="../../d8/dba/classPoacher.html#a0de780a4d29c3df62752259f583ff5a2">Poacher::Poacher</a>(<span class="keyword">const</span> TString &amp;fileName)</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="comment">// Will not hurt anyway;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="../../da/d40/classerhic_1_1Forester.html#ab776909a015ba2273d1bccd4975b1ebe">SetInputFileName</a>(std::string(fileName.Data()));</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <a class="code" href="../../d8/dba/classPoacher.html#a5742097aa426b812b958aed72aacc2c0">ResetProMC</a>(); <a class="code" href="../../d8/dba/classPoacher.html#a57de6abe7594aa153abdc148567ebcd5">ResetEicMC</a>();</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">//printf(&quot;%s\n&quot;, fileName.Data());</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordflow">if</span> (fileName.EndsWith(<span class="stringliteral">&quot;.promc&quot;</span>)) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#ifdef _PROMC_</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor"></span>    <span class="comment">// Open ProMC file; get access to the header fields;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="../../d8/dba/classPoacher.html#a9eebf4cd1478db65317416fc41c70517">mProMCBook</a> = <span class="keyword">new</span> ProMCBook(fileName.Data(), <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// NB: in fact the above constructor terminates the program if file can not be opened;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/dba/classPoacher.html#a9eebf4cd1478db65317416fc41c70517">mProMCBook</a>) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      ProMCHeader header = <a class="code" href="../../d8/dba/classPoacher.html#a9eebf4cd1478db65317416fc41c70517">mProMCBook</a>-&gt;getHeader();</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#a6c0235ea59e6e73761d4f58959cc6e22">mMomentumUnits</a> = (double)(header.momentumunit());</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#a0754e580dd349a32e4e1c2216d7ba361">mLengthUnits</a>   = (double)(header.lengthunit());</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    } </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      Fatal(<span class="stringliteral">&quot;Poacher::Poacher()&quot;</span>, <span class="stringliteral">&quot;failed to open input ProMC file.&quot;</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// Allocate buffer variables;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a> = <span class="keyword">new</span> <a class="code" href="../../d9/ddf/classerhic_1_1ParticleMC.html">erhic::ParticleMC</a>();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="../../d8/dba/classPoacher.html#ada0685cb8984ad655eae2ee835300edc">mEventProMC</a> = <span class="keyword">new</span> <a class="code" href="../../d3/db8/classEventProMC.html">EventProMC</a>(); </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor"></span>    Fatal(<span class="stringliteral">&quot;Poacher::Poacher()&quot;</span>, <span class="stringliteral">&quot;ProMC support is not compiled in.&quot;</span>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor"></span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fileName.EndsWith(<span class="stringliteral">&quot;.eicmc&quot;</span>)) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#ifdef _EICMC_</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor"></span>    GOOGLE_PROTOBUF_VERIFY_VERSION;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// Open EicMC file; get access to the header fields;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="../../d8/dba/classPoacher.html#a8ebb78a4bfd7f1811ba4f564bfa38226">mReaderEicMC</a> = <span class="keyword">new</span> EicMC::Reader(fileName.Data());</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// Allocate buffer variables;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a> = <span class="keyword">new</span> <a class="code" href="../../d9/ddf/classerhic_1_1ParticleMC.html">erhic::ParticleMC</a>();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="../../d8/dba/classPoacher.html#afe5f88cbe665df82a6abca55d6275e7d">mEventEicMC</a> = <span class="keyword">new</span> <a class="code" href="../../d1/d50/classEventEicMC.html">EventEicMC</a>();</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor"></span>    Fatal(<span class="stringliteral">&quot;Poacher::Poacher()&quot;</span>, <span class="stringliteral">&quot;EicMC support is not compiled in.&quot;</span>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor"></span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// Forester on some generator ASCII file input; open file and jump to the first event;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">// FIXME: there must be a memory leak somewhere here; works with absolute path only (?);</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="../../da/d40/classerhic_1_1Forester.html#a968a154a17b9fcc6f385c8ea0fc0394b">OpenInput</a>();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="../../da/d40/classerhic_1_1Forester.html#a198ab19ee5d6cf67000888c3cca70417">FindFirstEvent</a>();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  } <span class="comment">//if</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;} <span class="comment">// Poacher::Poacher()</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="code" href="../../d8/dba/classPoacher.html#a2c1b732c309f33c1fb6e047973b236f2">   84</a></span>&#160;<a class="code" href="../../da/d46/classerhic_1_1VirtualEvent.html" title="Abstract base class for a physics event.">erhic::VirtualEvent</a> *<a class="code" href="../../d8/dba/classPoacher.html#a2c1b732c309f33c1fb6e047973b236f2">Poacher::GetNextEvent</a>() </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{ </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dba/classPoacher.html#a9eebf4cd1478db65317416fc41c70517">mProMCBook</a>) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#ifdef _PROMC_</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor"></span>    <span class="comment">// Check, that there are still events in th efile;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/dba/classPoacher.html#a9eebf4cd1478db65317416fc41c70517">mProMCBook</a>-&gt;next() != 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// This also resets the particle list;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="../../d8/dba/classPoacher.html#ada0685cb8984ad655eae2ee835300edc">mEventProMC</a>-&gt;<a class="code" href="../../d6/dfb/classerhic_1_1EventMC.html#a3a9dd0a615074751cce91e671a46c30d">Clear</a>();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// Get ProMC event from file, loop through all the particles </span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// and populate erhic::EventMC, which has a format, understandable to the rest of the code;  </span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    ProMCEvent eve = <a class="code" href="../../d8/dba/classPoacher.html#a9eebf4cd1478db65317416fc41c70517">mProMCBook</a>-&gt;get();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    ProMCEvent_Particles *pa=eve.mutable_particles();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// Well, I have to preserve consistency in the particle array (at least not </span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// to screw up parent-daughter relationship); so put ALL the particles in the </span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// event record; EicEventGenerator::ReadEvent() will take care to select only </span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// those with code &#39;1&#39; for transport and to create proper mapping table;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;pa-&gt;pdg_id_size(); j++) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="comment">// Assign 4-momentum; units seemingly become [GeV] here, fine;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#af3dbf2a11907f0057b6cfc1af30e5b75">Set4Vector</a>((1.0/<a class="code" href="../../d8/dba/classPoacher.html#a6c0235ea59e6e73761d4f58959cc6e22">mMomentumUnits</a>)*TLorentzVector(pa-&gt;px(j), pa-&gt;py(j), pa-&gt;pz(j), pa-&gt;energy(j)));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="comment">// Assign vertex; FIXME: seemingly this way I obtain [cm]?;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a72a8e62968d27cc591dbd1b03c8436e9">SetVertex</a>((0.1/<a class="code" href="../../d8/dba/classPoacher.html#a0754e580dd349a32e4e1c2216d7ba361">mLengthUnits</a>)*TVector3(pa-&gt;x(j), pa-&gt;y(j), pa-&gt;z(j)));</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="comment">// Assign status and PDG;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a623b39b03206ecdd44e8e3f14664c342">SetStatus</a>((<span class="keywordtype">int</span>)pa-&gt;status(j));</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a7d1f67920283b17e4bf61b35ea513c82">SetId</a>(pa-&gt;pdg_id(j));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="comment">// Assign parent (assume a single one, sorry); base-1 here and below, right?;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a9feffa003cd90488b46f5bee8106761e">SetParentIndex</a>(pa-&gt;mother1(j));</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="comment">// Assign daughter range; </span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a917fdf3bb70c74a5219951867e6adfba">SetChild1Index</a>(pa-&gt;daughter1(j));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a30311135037ad4ed40dd171d0cc803d2">SetChildNIndex</a>(pa-&gt;daughter2(j));</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="comment">// NB: this call will dereference the pointer and create another instance, so </span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="comment">// hopefully there is no screw up with re-using the same pointer here;</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ada0685cb8984ad655eae2ee835300edc">mEventProMC</a>-&gt;<a class="code" href="../../d6/dfb/classerhic_1_1EventMC.html#a180c8febd4a10aea7da0489cfcde9bc1">AddLast</a>(<a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="comment">//printf(&quot;%4d (%4d) (%5d) -&gt; %8.2f %8.2f %8.2f ... %8.2f %8.2f %8.2f\n&quot;, </span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="comment">//     j, mParticle-&gt;GetStatus(), mParticle-&gt;Id().Code(), </span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="comment">//     mParticle-&gt;GetPx(), mParticle-&gt;GetPy(), mParticle-&gt;GetPz(), </span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="comment">//     mParticle-&gt;GetVertex().X(), mParticle-&gt;GetVertex().Y(), mParticle-&gt;GetVertex().Z());</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    } <span class="comment">//for j</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/dba/classPoacher.html#ada0685cb8984ad655eae2ee835300edc">mEventProMC</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor"></span>    Fatal(<span class="stringliteral">&quot;Poacher::Poacher()&quot;</span>, <span class="stringliteral">&quot;ProMC support is not compiled in.&quot;</span>); <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor"></span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/dba/classPoacher.html#a8ebb78a4bfd7f1811ba4f564bfa38226">mReaderEicMC</a>) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#ifdef _EICMC_</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor"></span>    <span class="comment">// FIXME: allocate once;</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    eicmc::Record record;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// Get next event record; return 0 if end-of-file encountered;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/dba/classPoacher.html#a8ebb78a4bfd7f1811ba4f564bfa38226">mReaderEicMC</a>-&gt;GetNextEvent(record)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keyword">const</span> eicmc::Record::MonteCarloEvent &amp;mcevent = record.mcevent();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> pt=0; pt&lt;mcevent.particles_size(); pt++) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../db/d8e/Particle_8h.html#ae53f3f955ca35ff2997e55a1f23163ec">eicmc::Record::MonteCarloEvent::Particle</a> &amp;<a class="code" href="../../d2/dcb/InteractionsTests_8cpp.html#a49e870c99a8692187245a7616ef6794c">particle</a> = mcevent.particles(pt);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="comment">// Assign 4-momentum; FIXME: energy component!;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#af3dbf2a11907f0057b6cfc1af30e5b75">Set4Vector</a>(TLorentzVector(particle.px(), particle.py(), particle.pz()));</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="comment">// Assign vertex; </span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a72a8e62968d27cc591dbd1b03c8436e9">SetVertex</a>(TVector3(particle.vx(), particle.vy(), particle.vz()));</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="comment">// Assign status and PDG;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a623b39b03206ecdd44e8e3f14664c342">SetStatus</a>((<span class="keywordtype">int</span>)particle.status());</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a7d1f67920283b17e4bf61b35ea513c82">SetId</a>(particle.pdg());</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="comment">// Assign parent (assume a single one, sorry); base-1 here and below, right?;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a9feffa003cd90488b46f5bee8106761e">SetParentIndex</a>(particle.mother1());</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="comment">// Assign daughter range; </span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a917fdf3bb70c74a5219951867e6adfba">SetChild1Index</a>(particle.daughter1());</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>-&gt;<a class="code" href="../../de/d3c/classerhic_1_1ParticleMCbase.html#a30311135037ad4ed40dd171d0cc803d2">SetChildNIndex</a>(particle.daughter2());</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="comment">// NB: see the comment in ProMC section; same story here;</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <a class="code" href="../../d8/dba/classPoacher.html#afe5f88cbe665df82a6abca55d6275e7d">mEventEicMC</a>-&gt;<a class="code" href="../../d6/dfb/classerhic_1_1EventMC.html#a180c8febd4a10aea7da0489cfcde9bc1">AddLast</a>(<a class="code" href="../../d8/dba/classPoacher.html#ab171367c01250dda01620cf5d27b40fb">mParticle</a>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    } <span class="comment">//for pt</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/dba/classPoacher.html#afe5f88cbe665df82a6abca55d6275e7d">mEventEicMC</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor"></span>    Fatal(<span class="stringliteral">&quot;Poacher::Poacher()&quot;</span>, <span class="stringliteral">&quot;EicMC support is not compiled in.&quot;</span>); <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor"></span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d40/classerhic_1_1Forester.html#a20355e5ae3096c91eeac29dc91428404">mFactory</a>) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../da/d40/classerhic_1_1Forester.html#a20355e5ae3096c91eeac29dc91428404">mFactory</a>-&gt;<a class="code" href="../../da/d91/classerhic_1_1VirtualEventFactory.html#a3e4644f24f6d516ad6fac1743ac49582">Create</a>(); </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;} <span class="comment">// Poacher::GetNextEvent() </span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">// ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="code" href="../../d8/dba/classPoacher.html#a0eea40492b0a33a8cb2b7ce8d9baf9e8">  179</a></span>&#160;std::string <a class="code" href="../../d8/dba/classPoacher.html#a0eea40492b0a33a8cb2b7ce8d9baf9e8">Poacher::EventName</a>()<span class="keyword"> const </span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keyword"></span>{ </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/dba/classPoacher.html#a9eebf4cd1478db65317416fc41c70517">mProMCBook</a>) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">return</span> EventProMC::Class()-&gt;GetName();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/dba/classPoacher.html#a8ebb78a4bfd7f1811ba4f564bfa38226">mReaderEicMC</a>) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span> EventEicMC::Class()-&gt;GetName();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d40/classerhic_1_1Forester.html#a20355e5ae3096c91eeac29dc91428404">mFactory</a>) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../da/d40/classerhic_1_1Forester.html#a20355e5ae3096c91eeac29dc91428404">mFactory</a>-&gt;<a class="code" href="../../da/d91/classerhic_1_1VirtualEventFactory.html#ab216747b625254af35a07f2b78769144">EventName</a>(); </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    assert(0); <span class="comment">//return &quot;&quot;;</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  } <span class="comment">//if</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;} <span class="comment">// Poacher::EventName()</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">// =======================================================================================</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">//EicEventGenerator::EicEventGenerator(TString fileName): FairGenerator()</span></div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="code" href="../../dd/df6/classEicEventGenerator.html#ab47f7770f049cd505ff4614d8de13290">  195</a></span>&#160;<a class="code" href="../../dd/df6/classEicEventGenerator.html#ab47f7770f049cd505ff4614d8de13290">EicEventGenerator::EicEventGenerator</a>(TString fileName): <a class="code" href="../../dd/df0/classEicProtoGenerator.html">EicProtoGenerator</a>(<span class="stringliteral">&quot;EicEventGenerator&quot;</span>)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">//if (mInstance) {</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">//Fatal(&quot;EicEventGenerator::EicEventGenerator()&quot;, &quot;Singleton instance already exists.&quot;);</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">//return;</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">//} //if</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="../../dd/df6/classEicEventGenerator.html#a046bf86071a19ddf260c24c872ed4874">mInstance</a> = <span class="keyword">this</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;-I EicEventGenerator: Using input file(s) &quot;</span> &lt;&lt; fileName &lt;&lt; endl;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// Reset private variables to 0; </span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="../../dd/df6/classEicEventGenerator.html#abb37b23fb580d48e1604240f181da5a4">ResetVars</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// This basically will be a default constructor;</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">if</span> (fileName.IsNull()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="comment">// Yes, either &quot;.root&quot; suffix (ROOT file(s)) or any other extension </span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">// and then it is some generator output ASCII file;</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">if</span> (fileName.EndsWith(<span class="stringliteral">&quot;.root&quot;</span>))</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="../../dd/df6/classEicEventGenerator.html#af532bef76735c40b848cde5d4b550ad5">mInputTree</a> = <span class="keyword">new</span> TChain(<a class="code" href="../../db/d23/EicEventGenerator_8h.html#afca36b8137e532517f8381714f842b32">_EIC_GENERATOR_TREE_</a>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// NB: this will work on either single file or a mask like &quot;dir/*.root&quot;;</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="../../dd/df6/classEicEventGenerator.html#af532bef76735c40b848cde5d4b550ad5">mInputTree</a>-&gt;Add(fileName);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="../../dd/df6/classEicEventGenerator.html#af532bef76735c40b848cde5d4b550ad5">mInputTree</a>-&gt;SetBranchAddress(<a class="code" href="../../db/d23/EicEventGenerator_8h.html#a8850fbb6d691680c0f966da4740827e6">_EIC_GENERATOR_EVENT_BRANCH_</a>, &amp;<a class="code" href="../../dd/df6/classEicEventGenerator.html#a2772843066c791c1c853b72ab288444a">mGeneratorEvent</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">// If anything goes wrong here, Forester will throw an exception; </span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="../../dd/df6/classEicEventGenerator.html#a488eb219e5e9062f97a5e1090b3f5c3e" title="singelton instance">mPoacher</a> = <span class="keyword">new</span> <a class="code" href="../../d8/dba/classPoacher.html">Poacher</a>(fileName);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="../../dd/df6/classEicEventGenerator.html#ac8cacd2a3d71494f2bd8211aaf49f46b">mMappingTable</a> = <span class="keyword">new</span> <a class="code" href="../../d9/ddb/classParticleMappingTable.html">ParticleMappingTable</a>();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;} <span class="comment">// EicEventGenerator::EicEventGenerator()</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">// ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">// Well, the implementation is such, that this call can happen at any time </span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">// and more than once; not really needed, but do not want to keep track of &gt;1</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">// calls either; let user be responsible;</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d9/dbb/EventDpmjet_8h.html">eicsmear/erhic/EventDpmjet.h</a>&gt;</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="code" href="../../dd/df6/classEicEventGenerator.html#a96c9601b9dd0ccad7d27ca6e401d6837">  238</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../dd/df6/classEicEventGenerator.html#a96c9601b9dd0ccad7d27ca6e401d6837">EicEventGenerator::SkipFewEvents</a>(<span class="keywordtype">unsigned</span> eventsToSkip)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/df6/classEicEventGenerator.html#a488eb219e5e9062f97a5e1090b3f5c3e" title="singelton instance">mPoacher</a>) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// Have to loop through the ASCII file;</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> ev=0; ev&lt;eventsToSkip; ev++) </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dd/df6/classEicEventGenerator.html#a488eb219e5e9062f97a5e1090b3f5c3e" title="singelton instance">mPoacher</a>-&gt;<a class="code" href="../../d8/dba/classPoacher.html#a2c1b732c309f33c1fb6e047973b236f2">GetNextEvent</a>())</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// In case of ROOT tree input just increment next event counter;</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="../../dd/df6/classEicEventGenerator.html#a381011dee3f90eb65a9f21b0e91b5b94">mInputTreeNextEventId</a> += eventsToSkip;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">//printf(&quot; --&gt; will start from %d\n&quot;, mInputTreeNextEventId); exit(0);</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// Well, allow some control over what&#39;s going on;</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/df6/classEicEventGenerator.html#af532bef76735c40b848cde5d4b550ad5">mInputTree</a>-&gt;GetEntry(<a class="code" href="../../dd/df6/classEicEventGenerator.html#a381011dee3f90eb65a9f21b0e91b5b94">mInputTreeNextEventId</a>)) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  } <span class="comment">//if</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;} <span class="comment">// EicEventGenerator::SkipFewEvents()</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">// ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="code" href="../../dd/df6/classEicEventGenerator.html#a40924445938964cff3db00bb4f59debe">  259</a></span>&#160;Bool_t <a class="code" href="../../dd/df6/classEicEventGenerator.html#a40924445938964cff3db00bb4f59debe">EicEventGenerator::ReadEvent</a>(<a class="code" href="../../d6/d1f/classFairPrimaryGenerator.html">FairPrimaryGenerator</a>* primGen)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// Clear re-mapping vector;</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="../../dd/df6/classEicEventGenerator.html#ac8cacd2a3d71494f2bd8211aaf49f46b">mMappingTable</a>-&gt;<a class="code" href="../../d9/ddb/classParticleMappingTable.html#aa54eaead910b6c6e5f2c9d072c8fc29d">mData</a>.clear();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// Fill out the next event record; NB: if PDG selection is made, it can happen, that </span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// there are no primary particles selected; therefore loop until find an event with </span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">// at least one particle;</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">for</span>( ; ; ) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// Check, that event chunk size was not exceeded;</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/df6/classEicEventGenerator.html#ab8622ec92815053137086781ba039eb9">mEventChunkSize</a> &amp;&amp; <a class="code" href="../../dd/df6/classEicEventGenerator.html#a6d76ab657e479386fbf72180747b471e">mEventCounter</a> == <a class="code" href="../../dd/df6/classEicEventGenerator.html#ab8622ec92815053137086781ba039eb9">mEventChunkSize</a>) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot;-W- EicEventGenerator(): event chunk size limit reached!&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span> kFALSE;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    } <span class="comment">//if</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/df6/classEicEventGenerator.html#a488eb219e5e9062f97a5e1090b3f5c3e" title="singelton instance">mPoacher</a>)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <a class="code" href="../../dd/df6/classEicEventGenerator.html#a2772843066c791c1c853b72ab288444a">mGeneratorEvent</a> = <a class="code" href="../../dd/df6/classEicEventGenerator.html#a488eb219e5e9062f97a5e1090b3f5c3e" title="singelton instance">mPoacher</a>-&gt;<a class="code" href="../../d8/dba/classPoacher.html#a2c1b732c309f33c1fb6e047973b236f2">GetNextEvent</a>();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="comment">//printf(&quot;%6d ...\n&quot;, mInputTreeNextEventId);</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../dd/df6/classEicEventGenerator.html#af532bef76735c40b848cde5d4b550ad5">mInputTree</a>-&gt;GetEntry(<a class="code" href="../../dd/df6/classEicEventGenerator.html#a381011dee3f90eb65a9f21b0e91b5b94">mInputTreeNextEventId</a>++)) <a class="code" href="../../dd/df6/classEicEventGenerator.html#a2772843066c791c1c853b72ab288444a">mGeneratorEvent</a> = 0;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    } <span class="comment">//if</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/df6/classEicEventGenerator.html#a2772843066c791c1c853b72ab288444a">mGeneratorEvent</a>) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot;-E- EicEventGenerator(): event list exhausted!&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">return</span> kFALSE;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    } <span class="comment">//if</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// NB: this counter does not care about event selections, it just counts </span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">// all considered input event candidates;</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="../../dd/df6/classEicEventGenerator.html#a6d76ab657e479386fbf72180747b471e">mEventCounter</a>++;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// If only leading particle is requested, have to arrange a separate loop;</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordtype">int</span> leadingParticleId = -1;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordtype">double</span> leadingParticleMomentum;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/df6/classEicEventGenerator.html#a2672f758b5676aaccd464be6cb3e31c7">mSelectLeadingParticle</a>) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> iq=0; iq&lt;<a class="code" href="../../dd/df6/classEicEventGenerator.html#a2772843066c791c1c853b72ab288444a">mGeneratorEvent</a>-&gt;<a class="code" href="../../da/d46/classerhic_1_1VirtualEvent.html#a7e4321dcd1f62fc84de0ddb27bb08230">GetNTracks</a>(); iq++) { </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html" title="Abstract base class for a general particle.">erhic::VirtualParticle</a> *vp = <a class="code" href="../../dd/df6/classEicEventGenerator.html#a2772843066c791c1c853b72ab288444a">mGeneratorEvent</a>-&gt;<a class="code" href="../../da/d46/classerhic_1_1VirtualEvent.html#ad27750892eb8fb82c5ce076bfe8b4832">GetTrack</a>(iq);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// May want to do it better later; suffices for now;</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">if</span> (vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a56e48270fb8bb5e7393e9b320b32359e">GetStatus</a>() != 1) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// Well, if PDG selection was applied, check that this particle matches;</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/df6/classEicEventGenerator.html#aa7533e5a79c854d3705d3d9618e9c1a8">mSelectedPdgCodes</a>.size() &amp;&amp; <a class="code" href="../../dd/df6/classEicEventGenerator.html#aa7533e5a79c854d3705d3d9618e9c1a8">mSelectedPdgCodes</a>.find(vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#ac7c17f9d78d8c400e4d53e12edf0bc86">Id</a>()) == <a class="code" href="../../dd/df6/classEicEventGenerator.html#aa7533e5a79c854d3705d3d9618e9c1a8">mSelectedPdgCodes</a>.end())</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">if</span> (leadingParticleId == -1 || vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a9f76797a01731374620e6c741e3d42f6">GetP</a>() &gt; leadingParticleMomentum) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    leadingParticleId       = iq;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    leadingParticleMomentum = vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a9f76797a01731374620e6c741e3d42f6">GetP</a>();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  } <span class="comment">//if</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      } <span class="comment">//for iq</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="comment">// Well, if was not able to select a proper leading particle, skip to next event;</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">if</span> (leadingParticleId == -1 || </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    (<a class="code" href="../../dd/df6/classEicEventGenerator.html#abf51d1c48375a1eca942695caebaca10">mSelectedLeadingParticlePmin</a> &amp;&amp; leadingParticleMomentum &lt; <a class="code" href="../../dd/df6/classEicEventGenerator.html#abf51d1c48375a1eca942695caebaca10">mSelectedLeadingParticlePmin</a>))</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    } <span class="comment">//if</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="comment">//erhic::EventDpmjet *evt = dynamic_cast&lt;erhic::EventDpmjet*&gt;(mGeneratorEvent);</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="comment">//assert(evt);</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="comment">//printf(&quot; @@@ -&gt; %d %d\n&quot;, evt-&gt;process1, evt-&gt;process2);</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    } </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">// Will be the same for all tracks;</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    TVector3 <a class="code" href="../../d5/dbe/EIC-IR1-XX-v00_8C.html#a888f39f7254b5b59976d577091d79a4e">vtx</a> = <a class="code" href="../../dd/df0/classEicProtoGenerator.html#a1faea8dfbc627c99878cec36be95fa37">GetSimulatedPrimaryVertex</a>();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">//printf(&quot;%d\n&quot;, mGeneratorEvent-&gt;GetNTracks()); fflush(stdout);</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// Loop through all the particles and feed them to the FairRoot primary generator;</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> iq=0; iq&lt;<a class="code" href="../../dd/df6/classEicEventGenerator.html#a2772843066c791c1c853b72ab288444a">mGeneratorEvent</a>-&gt;<a class="code" href="../../da/d46/classerhic_1_1VirtualEvent.html#a7e4321dcd1f62fc84de0ddb27bb08230">GetNTracks</a>(); iq++) { </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html" title="Abstract base class for a general particle.">erhic::VirtualParticle</a> *vp = <a class="code" href="../../dd/df6/classEicEventGenerator.html#a2772843066c791c1c853b72ab288444a">mGeneratorEvent</a>-&gt;<a class="code" href="../../da/d46/classerhic_1_1VirtualEvent.html#ad27750892eb8fb82c5ce076bfe8b4832">GetTrack</a>(iq);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="comment">// May want to do it better later; suffices for now;</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">if</span> (vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a56e48270fb8bb5e7393e9b320b32359e">GetStatus</a>() != 1) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="comment">// Well, if PDG selection was applied, check that this particle matches;</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/df6/classEicEventGenerator.html#aa7533e5a79c854d3705d3d9618e9c1a8">mSelectedPdgCodes</a>.size() &amp;&amp; <a class="code" href="../../dd/df6/classEicEventGenerator.html#aa7533e5a79c854d3705d3d9618e9c1a8">mSelectedPdgCodes</a>.find(vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#ac7c17f9d78d8c400e4d53e12edf0bc86">Id</a>()) == <a class="code" href="../../dd/df6/classEicEventGenerator.html#aa7533e5a79c854d3705d3d9618e9c1a8">mSelectedPdgCodes</a>.end())</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="comment">// If leading particle was selected, check exact match;</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">if</span> (leadingParticleId != -1 &amp;&amp; leadingParticleId != iq) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="comment">//if (vp-&gt;GetParentIndex() != 6) continue;</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="comment">// Record explicitely all entries in the original erhic::ParticleMC* array</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="comment">// which made it into the GEANT tracing engine; if direct encoding proves to </span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="comment">// be inconvenient, create inverse table or perhaps a 0/1 map;</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <a class="code" href="../../dd/df6/classEicEventGenerator.html#ac8cacd2a3d71494f2bd8211aaf49f46b">mMappingTable</a>-&gt;<a class="code" href="../../d9/ddb/classParticleMappingTable.html#aa54eaead910b6c6e5f2c9d072c8fc29d">mData</a>.push_back(iq);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="comment">// Populate energy flow plot if requested;</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/df6/classEicEventGenerator.html#a816210a1e0e855c69acba98f9c35d4c3">mEnergyFlowPdgCodes</a>.find(vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#ac7c17f9d78d8c400e4d53e12edf0bc86">Id</a>()) != <a class="code" href="../../dd/df6/classEicEventGenerator.html#a816210a1e0e855c69acba98f9c35d4c3">mEnergyFlowPdgCodes</a>.end()) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">//printf(&quot; --&gt; %7.2f; %7.2f %7.2f -&gt; %7.2f\n&quot;, vp-&gt;GetEta(), </span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">//     1000*vp-&gt;GetE(), 1000*vp-&gt;GetM(), 1000*(vp-&gt;GetE() - vp-&gt;GetM()));</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/df6/classEicEventGenerator.html#a43b47b323ed6ada99829c7c65e6b04c3">mEnergyFlowHist</a>)    <a class="code" href="../../dd/df6/classEicEventGenerator.html#a43b47b323ed6ada99829c7c65e6b04c3">mEnergyFlowHist</a>   -&gt;Fill(vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a814fea487e227a2dd9d188b23f239c0c">GetEta</a>(), vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a1075f27c126e87e558493734a7d5bb28">GetE</a>() - vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a48c2cab76721464e51ac6d59efa4ed0d">GetM</a>());</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/df6/classEicEventGenerator.html#a9559253ce94368511a7d0392902ccb95">mParticleCountHist</a>) <a class="code" href="../../dd/df6/classEicEventGenerator.html#a9559253ce94368511a7d0392902ccb95">mParticleCountHist</a>-&gt;Fill(vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a814fea487e227a2dd9d188b23f239c0c">GetEta</a>());</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      } <span class="comment">//if</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="comment">// Indeed some of the tracks may originate from a secondary vertex -&gt; calculate a sum;</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      TVector3 pvtx = vtx + vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a0e17a06b5695a0a9672305a1809735a8">GetVertex</a>();</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="comment">// FIXME: at some point check that vtx units match;</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  TVector3 pvect = <a class="code" href="../../dd/df0/classEicProtoGenerator.html#a5ab725d9214248e595b564240901c5b1">GetModifiedTrack</a>(TVector3(vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a3db3bcb53773ba05f190bdf1a545d3c8">GetPx</a>(), vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a8c51537a2bd57b701bc40f3438572523">GetPy</a>(), vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#ad59e56ccdd12f4b9ce381f52553235c0">GetPz</a>()));<span class="comment">//vp-&gt;GetP());</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">//primGen-&gt;AddTrack(vp-&gt;Id(), vp-&gt;GetPx(), vp-&gt;GetPy(), vp-&gt;GetPz(), vtx[0], vtx[1], vtx[2]);</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="../../da/d23/msg__buffer_8cc.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%7.3f %7.3f %7.3f ... %4d  %2d\n&quot;</span>, pvect[0], pvect[1], pvect[2], vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#ad7f3670b458bf04c18c020bac4cf155a">GetParentIndex</a>(), vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#a56e48270fb8bb5e7393e9b320b32359e">GetStatus</a>());</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">//printf(&quot;%7.3f %7.3f %7.3f\n&quot;, vp-&gt;GetPx(), vp-&gt;GetPy(), vp-&gt;GetPz());//pvect[0], pvect[1], pvect[2]);</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  primGen-&gt;<a class="code" href="../../d6/d1f/classFairPrimaryGenerator.html#a1066c04b726fde17ce36e3ee222963f9">AddTrack</a>(vp-&gt;<a class="code" href="../../d0/d01/classerhic_1_1VirtualParticle.html#ac7c17f9d78d8c400e4d53e12edf0bc86">Id</a>(), pvect[0], pvect[1], pvect[2], pvtx[0], pvtx[1], pvtx[2]);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    } <span class="comment">/*for iq*/</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">//printf(&quot;stat: %3d -&gt; %3d\n&quot;, mGeneratorEvent-&gt;GetNTracks(), mMappingTable-&gt;mData.size());</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="comment">// There are primary tracks selected in this event -&gt; break;</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/df6/classEicEventGenerator.html#ac8cacd2a3d71494f2bd8211aaf49f46b">mMappingTable</a>-&gt;<a class="code" href="../../d9/ddb/classParticleMappingTable.html#aa54eaead910b6c6e5f2c9d072c8fc29d">mData</a>.size()) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  } <span class="comment">//for inf</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// THINK: for now the idea is that in case input file had no events, output tree/branch(es)</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">//        are not created at all; re-shuffle &quot;outputBranch&quot; assignment, etc if this </span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">//        ever becomes a problem;</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// It looks like the easiest way is to always copy over the original tree into the same</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// simulation.root output file; it is indeed a duplication in case of .root input -&gt; FIXME; </span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// NB: just to mention it: output simulation.root file can be re-used as ROOT EICTree input file;</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keyword">static</span> TBranch *outputEventBranch, *outputMappingBranch;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (!outputEventBranch) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      TTree *outputTree = <span class="keyword">new</span> TTree(<a class="code" href="../../db/d23/EicEventGenerator_8h.html#afca36b8137e532517f8381714f842b32">_EIC_GENERATOR_TREE_</a>, <span class="stringliteral">&quot;A tree of original Monte Carlo events&quot;</span>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="comment">//outputTree-&gt;SetCurrentFile(&quot;simulation.root&quot;);</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="comment">// The easiest: do not switch pointers all the time; THINK: multi-threading?; </span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      outputEventBranch = outputTree-&gt;Branch(<a class="code" href="../../db/d23/EicEventGenerator_8h.html#a8850fbb6d691680c0f966da4740827e6">_EIC_GENERATOR_EVENT_BRANCH_</a>, </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;               <span class="comment">// Take real class name (like erhic::EventMilou) either </span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;               <span class="comment">// from poacher (ASCII input) </span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;               <span class="comment">// or from the input branch directly (.root input); </span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;               <a class="code" href="../../dd/df6/classEicEventGenerator.html#a488eb219e5e9062f97a5e1090b3f5c3e" title="singelton instance">mPoacher</a> ? <a class="code" href="../../dd/df6/classEicEventGenerator.html#a488eb219e5e9062f97a5e1090b3f5c3e" title="singelton instance">mPoacher</a>-&gt;<a class="code" href="../../d8/dba/classPoacher.html#a0eea40492b0a33a8cb2b7ce8d9baf9e8">EventName</a>().c_str() :</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;               <a class="code" href="../../dd/df6/classEicEventGenerator.html#af532bef76735c40b848cde5d4b550ad5">mInputTree</a>-&gt;GetBranch(<a class="code" href="../../db/d23/EicEventGenerator_8h.html#a8850fbb6d691680c0f966da4740827e6">_EIC_GENERATOR_EVENT_BRANCH_</a>)-&gt;GetClassName(), </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;               &amp;<a class="code" href="../../dd/df6/classEicEventGenerator.html#a2772843066c791c1c853b72ab288444a">mGeneratorEvent</a>, 32000, 99);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      outputMappingBranch = outputTree-&gt;Branch(<a class="code" href="../../db/d23/EicEventGenerator_8h.html#a416a078165d051be81e7322be930d0b7">_EIC_MAPPING_BRANCH_</a>, <span class="stringliteral">&quot;ParticleMappingTable&quot;</span>, </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                 &amp;<a class="code" href="../../dd/df6/classEicEventGenerator.html#ac8cacd2a3d71494f2bd8211aaf49f46b">mMappingTable</a>, 32000, 99);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="comment">// Arrange a separate FairTask with the only purpose to call Write() at the end of </span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="comment">// simulation run; FairRunSim::Instance() pointer should indeed be always available, or?;</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <a class="code" href="../../dd/dbc/classFairRunSim.html#a733dc616669bd5e542b5c05f6470c744">FairRunSim::Instance</a>()-&gt;<a class="code" href="../../dd/dd2/classFairRun.html#ae55b4cb59c1a84c17bf42e872f159304">AddTask</a>(<span class="keyword">new</span> <a class="code" href="../../dd/df6/classEicEventGenerator.html#a2b30c3b590e9768d27fe383a83ff9cc7">EicEventGeneratorTask</a>(outputTree));</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    } <span class="comment">//if</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    outputEventBranch-&gt;GetTree()-&gt;Fill();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">return</span> kTRUE;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;} <span class="comment">// EicEventGenerator::ReadEvent()</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">// ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="code" href="../../d1/d6f/classEicEventGeneratorTask.html#a1467c1facfdaaa5eee9165a5cbee2d67">  421</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/d6f/classEicEventGeneratorTask.html#a1467c1facfdaaa5eee9165a5cbee2d67">EicEventGeneratorTask::FinishTask</a>()</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6f/classEicEventGeneratorTask.html#a686b7d55f0449bc545bfcfa7cc499cc7">mOutputTree</a>) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">//printf(&quot; --&gt; writing to %s ...\n&quot;, mOutputTree-&gt;GetCurrentFile()-&gt;GetName());</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="../../d1/d6f/classEicEventGeneratorTask.html#a686b7d55f0449bc545bfcfa7cc499cc7">mOutputTree</a>-&gt;GetCurrentFile()-&gt;cd();</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="../../d1/d6f/classEicEventGeneratorTask.html#a686b7d55f0449bc545bfcfa7cc499cc7">mOutputTree</a>-&gt;Write();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="../../dd/df6/classEicEventGenerator.html">EicEventGenerator</a> *evtGen = <a class="code" href="../../dd/df6/classEicEventGenerator.html#a5a1dba1a8c82a9551c2ee619dafd5020">EicEventGenerator::Instance</a>();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (evtGen &amp;&amp; evtGen-&gt;<a class="code" href="../../dd/df6/classEicEventGenerator.html#a6d76ab657e479386fbf72180747b471e">mEventCounter</a>) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      TH1D *hists[2] = {evtGen-&gt;<a class="code" href="../../dd/df6/classEicEventGenerator.html#a9559253ce94368511a7d0392902ccb95">mParticleCountHist</a>, evtGen-&gt;<a class="code" href="../../dd/df6/classEicEventGenerator.html#a43b47b323ed6ada99829c7c65e6b04c3">mEnergyFlowHist</a>};</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> ih=0; ih&lt;2; ih++) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  TH1D *hist = hists[ih];</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">if</span> (hist) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    hist-&gt;Scale(1.0/(evtGen-&gt;<a class="code" href="../../dd/df6/classEicEventGenerator.html#a3738d4dc57e07f7d514b9c4ee74106c1">mEtaBinWidth</a>*evtGen-&gt;<a class="code" href="../../dd/df6/classEicEventGenerator.html#a6d76ab657e479386fbf72180747b471e">mEventCounter</a>));</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    hist-&gt;Write();</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  } <span class="comment">//if</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      } <span class="comment">//for ih</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    } <span class="comment">//if</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  } <span class="comment">//if</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <a class="code" href="../../d2/d9e/classFairTask.html#a6ec7acd9772463226e1f3e2424fa402a">FairTask::FinishTask</a>();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;} <span class="comment">// EicEventGeneratorTask::FinishTask()</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">// ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<a class="code" href="../../d5/db4/FairBaseContFact_8cxx.html#a9a58628a02b777c6a2e166100e5b7a81">ClassImp</a>(<a class="code" href="../../dd/df6/classEicEventGenerator.html">EicEventGenerator</a>)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<a class="code" href="../../d5/db4/FairBaseContFact_8cxx.html#a9a58628a02b777c6a2e166100e5b7a81">ClassImp</a>(<a class="code" href="../../d9/ddb/classParticleMappingTable.html">ParticleMappingTable</a>)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<a class="code" href="../../d5/db4/FairBaseContFact_8cxx.html#a9a58628a02b777c6a2e166100e5b7a81">ClassImp</a>(<a class="code" href="../../d1/d6f/classEicEventGeneratorTask.html">EicEventGeneratorTask</a>)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<a class="code" href="../../d5/db4/FairBaseContFact_8cxx.html#a9a58628a02b777c6a2e166100e5b7a81">ClassImp</a>(<a class="code" href="../../d3/db8/classEventProMC.html">EventProMC</a>)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<a class="code" href="../../d5/db4/FairBaseContFact_8cxx.html#a9a58628a02b777c6a2e166100e5b7a81">ClassImp</a>(<a class="code" href="../../d1/d50/classEventEicMC.html">EventEicMC</a>)</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath">
	<!-- id is needed for treeview function! -->
	<ul>
		<li class="navelem"><a class="el" href="../../dir_d7aa557fabe0dbc710c3133bbb38c9dd.html">EicRoot</a></li><li class="navelem"><a class="el" href="../../dir_6c2f52c7c502fdce4930bf509aa7892f.html">blob</a></li><li class="navelem"><a class="el" href="../../dir_b7851b2c5844943c52ef11ccfc82d757.html">master</a></li><li class="navelem"><a class="el" href="../../dir_1bfc7400c7d9621b65a7f5dd68fa40ba.html">eic</a></li><li class="navelem"><a class="el" href="../../dir_4686d11cf7e9173fdbb1512313ee4558.html">event</a></li><li class="navelem"><a class="el" href="../../dd/da3/EicEventGenerator_8cxx.html">EicEventGenerator.cxx</a></li>
		<li class="footer">
		Built by <a href="mailto:jhuang@bnl.gov">Jin Huang</a></em>.
			updated: <em>Mon Jan 22 2024 12:43:35</em> using <a
			href="http://www.doxygen.org/index.html"> <img class="footer"
				src="../../doxygen.png" alt="doxygen" /></a> 1.8.2 
				with <a href="https://github.com/eic">EIC GitHub integration</a>
		</li>
	</ul>
</div>
</body>
</html>
